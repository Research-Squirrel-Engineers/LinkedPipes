var sample=`@prefix : <http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@base <http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31> .

<http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31> rdf:type owl:Ontology .

#################################################################
#    Object Properties
#################################################################

###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#members
:members rdf:type owl:ObjectProperty .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#partOf
:partOf rdf:type owl:ObjectProperty .


###  https://w3id.org/dfd/1.0.0/fromEntity
<https://w3id.org/dfd/1.0.0/fromEntity> rdf:type owl:ObjectProperty .


###  https://w3id.org/dfd/1.0.0/toEntity
<https://w3id.org/dfd/1.0.0/toEntity> rdf:type owl:ObjectProperty .


#################################################################
#    Data properties
#################################################################

###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#pipeindex
:pipeindex rdf:type owl:DatatypeProperty ;
           rdfs:domain :LinkedPipe ;
           rdfs:range xsd:int .


#################################################################
#    Classes
#################################################################

###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#CSVDataStore
:CSVDataStore rdf:type owl:Class ;
              rdfs:subClassOf <https://w3id.org/dfd/1.0.0/DataStore> .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#LinkedPipe
:LinkedPipe rdf:type owl:Class .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#Script
:Script rdf:type owl:Class ;
        rdfs:subClassOf <http://www.w3.org/ns/prov#Agent> .


###  http://www.w3.org/ns/prov#Activity
<http://www.w3.org/ns/prov#Activity> rdf:type owl:Class .


###  http://www.w3.org/ns/prov#Agent
<http://www.w3.org/ns/prov#Agent> rdf:type owl:Class .


###  http://www.w3.org/ns/prov#Entity
<http://www.w3.org/ns/prov#Entity> rdf:type owl:Class .


###  https://w3id.org/dfd/1.0.0/DataStore
<https://w3id.org/dfd/1.0.0/DataStore> rdf:type owl:Class ;
                                       rdfs:subClassOf <https://w3id.org/dfd/1.0.0/Entity> .


###  https://w3id.org/dfd/1.0.0/Entity
<https://w3id.org/dfd/1.0.0/Entity> rdf:type owl:Class ;
                                    rdfs:subClassOf <http://www.w3.org/ns/prov#Entity> .


#################################################################
#    Individuals
#################################################################

###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#csv_to_postgres
:csv_to_postgres rdf:type owl:NamedIndividual ,
                          :Script ;
                 :partOf :oghampipe ;
                 <https://w3id.org/dfd/1.0.0/fromEntity> :oghamcsv ;
                 <https://w3id.org/dfd/1.0.0/toEntity> :oghampostgres ;
                 :pipeindex 0 .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#oghamcsv
:oghamcsv rdf:type owl:NamedIndividual ,
                   :CSVDataStore .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#oghampipe
:oghampipe rdf:type owl:NamedIndividual ,
                    :LinkedPipe ;
           rdfs:label "Ogham Pipe"@en .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#oghampostgres
:oghampostgres rdf:type owl:NamedIndividual ,
                        <https://w3id.org/dfd/1.0.0/DataStore> .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#oghamrdf
:oghamrdf rdf:type owl:NamedIndividual ,
                   <https://w3id.org/dfd/1.0.0/DataStore> .


###  http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#postgres_to_rdf
:postgres_to_rdf rdf:type owl:NamedIndividual ,
                          :Script ;
                 :partOf :oghampipe ;
                 <https://w3id.org/dfd/1.0.0/fromEntity> :oghampostgres ;
                 <https://w3id.org/dfd/1.0.0/toEntity> :oghamrdf ;
                 :pipeindex 1 .


###  Generated by the OWL API (version 4.5.9.2019-02-01T07:24:44Z) https://github.com/owlcs/owlapi
`
            function codeToRDF(){
            
            }
        
            function rdfToCode(pipeline,graph){
				resultnodes=""
				resultedges=""
				pipelinemap={}
				for(item of pipeline){
					pipelinemap[item.object.value]=item.subject.value
				}
				lastsub=""
				lastlabel=""
				first=true
				for(item in pipelinemap){
					if(first){
						first=false
						if(pipelinemap[item].includes("#")){
							resultnodes+=pipelinemap[item].substring(pipelinemap[item].lastIndexOf('#')+1)+"=>condition:"
						}else{
							resultnodes+=pipelinemap[item].substring(pipelinemap[item].lastIndexOf('/')+1)
						}
					}else{
						if(pipelinemap[item].includes("#")){
							resultedges+=lastlabel+"->"+pipelinemap[item].substring(pipelinemap[item].lastIndexOf('#')+1)+"\n"
							resultnodes+=pipelinemap[item].substring(pipelinemap[item].lastIndexOf('#')+1)
						}else{
							resultedges+=lastlabel+"->"+pipelinemap[item].substring(pipelinemap[item].lastIndexOf('/')+1)+"\n"
							resultnodes+=pipelinemap[item].substring(pipelinemap[item].lastIndexOf('/')+1)
						}
					}
					if(pipelinemap[item].includes("#")){
						resultnodes+="=>condition: "+pipelinemap[item].substring(pipelinemap[item].lastIndexOf('#')+1)+":>"+pipelinemap[item]+"\n"
					}else{
						resultnodes+="=>condition: "+pipelinemap[item].substring(pipelinemap[item].lastIndexOf('/')+1)+":>"+pipelinemap[item]+"\n"
					}
					lastsub=pipelinemap[item]
					if(pipelinemap[item].includes("#")){
						lastlabel=pipelinemap[item].substring(pipelinemap[item].lastIndexOf('#')+1)
					}else{
						lastlabel=pipelinemap[item].substring(pipelinemap[item].lastIndexOf('/')+1)
					}
				}
				console.log(resultnodes+"\n\n"+resultedges)
            }
        
            let doc = $rdf.sym("https://example.com/dfdexample/ogham");
            const store=$rdf.graph()
            $rdf.parse(sample, store, doc.uri, "text/turtle");
			var pipeline = store.statementsMatching(undefined, $rdf.sym("http://www.semanticweb.org/timohomburg/ontologies/2021/11/untitled-ontology-31#pipeindex"), undefined) 
			console.log(pipeline)
			rdfToCode(pipeline,store)